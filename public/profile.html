<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta name="akc-auth" content="strict" />

           <!-- å»ºè­°ï¼šæ‰€æœ‰é é¢ <head> æœ€å‰é¢éƒ½åŠ é€™è¡Œ -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é˜¿å¡è¥¿åœ–æ›¸é¤¨ï½œå€‹äººé é¢</title>
 <script src="https://cdn.tailwindcss.com"></script>
</head>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<!-- âœ… 1. å¼•å…¥ Firebase æ‰€éœ€ CDN -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>




<!-- âœ… 2. å¼•å…¥ä½ çš„ firebase.js åˆå§‹åŒ–æª”æ¡ˆ -->
<script src="JS/firebase.js"></script>

<body>

  <!-- âœ… æ”¾ç½®å°è¦½åˆ—çš„å ä½å…ƒç´  -->
  <div id="navbar-placeholder"></div>

    <!--
      ä½¿ç”¨ Tailwind å°‡åŸæœ¬çš„ userâ€‘info å€å¡Šè½‰æˆå¡ç‰‡æ¨£å¼ï¼š
      - pâ€‘6ï¼šå…§è·ç•™ç™½
      - bgâ€‘whiteï¼šç™½è‰²èƒŒæ™¯
      - border å’Œ roundedï¼šé‚Šæ¡†èˆ‡åœ“è§’
      - shadowï¼šæŠ•å½±å¢åŠ å±¤æ¬¡æ„Ÿ
      - spaceâ€‘yâ€‘2ï¼šå­å…ƒç´ å‚ç›´é–“è·
      - maxâ€‘wâ€‘lg mxâ€‘autoï¼šé™åˆ¶å¯¬åº¦ä¸¦ç½®ä¸­
    -->
    <div class="user-info p-6 bg-white border border-gray-200 rounded-lg shadow-md space-y-2 max-w-lg mx-auto">
      <!-- æš±ç¨±é¡¯ç¤ºèˆ‡ç·¨è¼¯æŒ‰éˆ•ï¼Œä½¿ç”¨ flex æ’ç‰ˆä¸¦ç½®ä¸­ï¼Œå¢æ·»é–“è· -->
      <div id="nickname-wrapper" class="flex items-center gap-2">
        <h2 id="nicknameDisplay">è¼‰å…¥ä¸­...</h2>
        <button id="editNicknameBtn" class="icon ml-2 text-xl cursor-pointer text-blue-500 hover:text-blue-700 focus:outline-none">âœï¸</button>
      </div>
      <!-- ç·¨è¼¯æš±ç¨±è¡¨å–®ï¼Œåˆå§‹éš±è—ï¼Œç•¶é¡¯ç¤ºæ™‚ä½¿ç”¨ flex æ’åˆ—å…ƒç´ ä¸¦åŠ ä¸Šé–“è· -->
      <form id="nicknameForm" class="hidden flex items-center gap-2 mt-2">
        <input type="text" id="nicknameInput" placeholder="è¼¸å…¥æ–°æš±ç¨±" required class="border border-gray-300 rounded px-2 py-1 flex-1" />
        <button type="submit" class="px-3 py-1 bg-blue-500 text-white rounded">æ›´æ–°</button>
      </form>
      <!-- ç‹€æ…‹æç¤ºæ–‡å­—ï¼Œä½¿ç”¨è¼ƒå°å­—ç´šèˆ‡é¡è‰²æ¨™ç¤ºæˆåŠŸæˆ–å¤±æ•— -->
      <p id="updateStatus" class="status text-sm mt-2"></p>
      <p><strong>UIDï¼š</strong><span id="uidDisplay">è¼‰å…¥ä¸­...</span></p>
      <p><strong>éŒ¢åŒ…ï¼š</strong><span id="walletDisplay">è¼‰å…¥ä¸­...</span></p>
    </div>


<!-- âœ… å€‹äººæ“ä½œåˆ—ï¼šèª²ç¨‹å¾Œå° / ä»»å‹™æ¸…å–® -->
<div class="max-w-lg mx-auto mt-4 flex gap-3">
  <a id="toStudio"
     href="upload.html"
     class="px-4 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 shadow">
    å‰å¾€èª²ç¨‹å¾Œå°
  </a>
  <button id="openMissions"
          class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50">
    ä»»å‹™æ¸…å–®
  </button>
</div>


  <!-- âœ… ä»»å‹™æ¸…å–®æ¨¡çµ„ -->
  <!-- ä»Šæ—¥ä»»å‹™é¢æ¿ï¼šé€é Tailwind è£½ä½œå¡ç‰‡å¼å€å¡Š -->
  <section class="mission-panel p-4 bg-white border border-gray-200 rounded-lg shadow-md my-6 max-w-lg mx-auto">
    <h3 class="text-lg font-semibold mb-2">ğŸ¯ ä»Šæ—¥ä»»å‹™</h3>
   <ul id="missionList" class="list-disc pl-5 space-y-1">
  <li>ï¼ˆè¼‰å…¥ä»»å‹™ä¸­â€¦ï¼‰</li>
</ul>
  </section>

  <!-- âœ… å­¸ç¿’çµ±è¨ˆæ¨¡çµ„ -->
  <!-- å­¸ç¿’çµ±è¨ˆå€å¡Šï¼šä½¿ç”¨ç¶²æ ¼æ’ç‰ˆé¡¯ç¤ºå¤šå€‹çµ±è¨ˆå¡ç‰‡ -->
  <section class="stats grid grid-cols-2 md:grid-cols-4 gap-4 my-6 max-w-3xl mx-auto">
     <div class="stat p-4 bg-white rounded-xl shadow-md text-center space-y-1">
    <h3 class="text-base font-semibold">æˆ‘çš„ Points</h3>
    <p id="pointsTotalDisplay" class="text-2xl font-semibold tracking-wide">0</p>
  </div>
    <div class="stat p-4 bg-white rounded-xl shadow-md text-center space-y-1">
      <h3 class="text-base font-semibold">å·²å®Œæˆèª²ç¨‹</h3>
      <p id="completedCourses" class="text-xl font-bold">0</p>
    </div>
    <div class="stat p-4 bg-white rounded-xl shadow-md text-center space-y-1">
      <h3 class="text-base font-semibold">å‰µå»ºèª²ç¨‹</h3>
      <p id="createdCourses" class="text-xl font-bold">0</p>
    </div>
    <div class="stat p-4 bg-white rounded-xl shadow-md text-center space-y-1">
      <h3 class="text-base font-semibold">ç´¯ç©ä¸Šèª²æ™‚æ•¸</h3>
      <p id="studyHours" class="text-xl font-bold">0 hr</p>
    </div>
    <div class="stat p-4 bg-white rounded-xl shadow-md text-center space-y-1">
      <h3 class="text-base font-semibold">ç²å¾—æ†‘è­‰</h3>
      <p id="certificates" class="text-xl font-bold">0</p>
    </div>
  </section>

<!-- ğŸ… æˆ‘çš„å¾½ç« ï¼ˆå…ˆä½”ä½ï¼Œä¹‹å¾Œç”± profile.js äº®ç‡ˆï¼‰ -->
<section id="achievements" class="max-w-3xl mx-auto my-8">
  <h2 class="text-base font-semibold mb-2">æˆ‘çš„å¾½ç« </h2>

<section id="pointsHistory" class="max-w-3xl mx-auto my-8">
  <h2 class="text-base font-semibold mb-2">æˆ‘çš„åŠ åˆ†æ­·å²</h2>
  <div id="pointsHistoryList" class="bg-white rounded-xl shadow p-4 text-sm">
    ï¼ˆè¼‰å…¥ä¸­â€¦ï¼‰
  </div>
</section>

  <ul id="badgeList" class="grid grid-cols-3 gap-3">
    <li id="badgeFirstCourse"
        data-badge="course:create"
        class="p-4 rounded-xl bg-white shadow ring-1 ring-slate-100 text-center">
      <div class="text-2xl">ğŸ</div>
      <div class="text-sm mt-1">å®Œæˆç¬¬ä¸€é–€èª²</div>
    </li>
    <li id="badgeFirstArticle"
        data-badge="lesson:article:create"
        class="p-4 rounded-xl bg-white shadow ring-1 ring-slate-100 text-center">
      <div class="text-2xl">âœï¸</div>
      <div class="text-sm mt-1">é¦–ç¯‡æ–‡ç« </div>
    </li>
    <li id="badgeFirstVideo"
        data-badge="lesson:video:ready"
        class="p-4 rounded-xl bg-white shadow ring-1 ring-slate-100 text-center">
      <div class="text-2xl">ğŸ¬</div>
      <div class="text-sm mt-1">é¦–æ”¯å½±ç‰‡</div>
    </li>
  </ul>
</section>




  <!-- âœ… JS é‚è¼¯ç¶å®šï¼ˆå«æš±ç¨±ä¿®æ”¹ + Firestore è¼‰å…¥ï¼‰ -->
  <script>
    document.getElementById("editNicknameBtn").addEventListener("click", () => {
      document.getElementById("nickname-wrapper").style.display = "none";
      document.getElementById("nicknameForm").style.display = "flex";
    });

  </script>

         <script src="JS/auth-control.js"></script> <!-- è¦å…ˆåŸ·è¡Œï¼Œè² è²¬æ¸…é™¤å¿«å– -->
             <!-- ğŸ”— å°è¦½åˆ—è¼‰å…¥å™¨ -->
<script src="JS/navbar-loader.js"></script>

<script src="JS/init-page.js"></script>

 <script src="JS/siwe.js?v=20250911b" defer></script>
<script src="JS/wallet.js" defer></script>

    <script src="JS/checkAccess.js"></script>
    <script src="JS/points.js" defer></script>
  <!-- <script src="JS/badges.js"></script>   -->
    <script src="JS/config.js"></script>
    <script src="JS/profile.js"></script>
    <script src="JS/main.js"></script>
    <script src="JS/ui.js"></script>

<!-- âœ… Drawerï¼šä»»å‹™æ¸…å–®ï¼ˆå·¦å´æ»‘å‡ºï¼‰ -->
<div id="drawerOverlay" class="hidden fixed inset-0 bg-black/40 z-40"></div>
<aside id="missionDrawer"
       class="fixed top-0 left-0 h-full w-80 max-w-[85vw] bg-white z-50 shadow-2xl
              transform -translate-x-full transition-transform duration-300">
  <div class="p-4 border-b flex items-center justify-between">
    <h3 class="text-lg font-semibold">ä»»å‹™æ¸…å–®</h3>
    <button id="closeMissions" class="text-gray-500 hover:text-gray-800 text-xl">âœ•</button>
  </div>
  <div class="p-4">
    <ul id="missionListDrawer" class="list-disc pl-5 space-y-1">
      <li>ï¼ˆè¼‰å…¥ä»»å‹™ä¸­â€¦ï¼‰</li>
    </ul>
    <div class="mt-4">
      <a href="missions.html" class="text-sm text-blue-600 hover:underline">æª¢è¦–å…¨éƒ¨ä»»å‹™ â†’</a>
    </div>
  </div>
</aside>


<script>
  window.addEventListener('DOMContentLoaded', async () => {
    // â‘  å…ˆè¼‰å…¥ Navbarï¼ˆç”± navbar-loader.js æä¾›ï¼‰
    if (typeof loadNavbar === 'function') {
      await loadNavbar();
      if (typeof initNavbar === 'function') initNavbar();
    }
    // â‘¡ å†å•Ÿå‹•å…¨åŸŸ UI
    if (window.initUI) window.initUI();
  });
</script>
<script>
  // Drawer é–‹é—œï¼ˆæœ€å°è½åœ°ç‰ˆï¼‰
  (function () {
    const openBtn = document.getElementById('openMissions');
    const drawer  = document.getElementById('missionDrawer');
    const overlay = document.getElementById('drawerOverlay');
    const closeBtn= document.getElementById('closeMissions');
    const copyList= () => {
      const src = document.getElementById('missionList');
      const dst = document.getElementById('missionListDrawer');
      if (src && dst) dst.innerHTML = src.innerHTML; // å…ˆè¤‡è£½ç¾æœ‰ä»»å‹™
    };
    function openDrawer() {
      copyList();
      overlay?.classList.remove('hidden');
      drawer?.classList.remove('-translate-x-full');
    }
    function closeDrawer() {
      overlay?.classList.add('hidden');
      drawer?.classList.add('-translate-x-full');
    }
    openBtn?.addEventListener('click', openDrawer);
    closeBtn?.addEventListener('click', closeDrawer);
    overlay?.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });
  })();
</script>

<section id="nftStatus" class="p-4 bg-gray-800 rounded-xl mt-4">
  <h2 class="text-xl font-bold text-white">ğŸ« NFT ç‹€æ…‹</h2>
  <p id="nftStatusMessage" class="text-green-400 mt-2">æ­£åœ¨æª¢æŸ¥ NFT æŒæœ‰ç‹€æ…‹...</p>
</section>
<div id="mintAction" class="mt-2 hidden">
  <a href="mint-pass.html" class="px-4 py-2 bg-yellow-400 text-black rounded-lg shadow hover:bg-yellow-300">
    å‰å¾€é‘„é€  NFT
  </a>
</div>
<div id="myLibraryNFTs" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>
</body>


</html>
