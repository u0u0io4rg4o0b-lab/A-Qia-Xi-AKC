<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <!-- 建議：所有頁面 <head> 最前面都加這行 -->
    <script src="JS/config.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- ✅ 首頁為公開頁 -->
    <meta name="akc-auth" content="open" />
    <title>阿卡西圖書館 Akashic Library</title>

    <!-- Tailwind CSS CDN -->
    <!-- 使用 CDN 引入 Tailwind，方便直接使用原生類別進行樣式調整 -->
    <script src="https://cdn.tailwindcss.com"></script>


    <script src="JS/auth-control.js"></script>
    <!-- 第三方腳本依照原始檔案保留，但順序調整至 head 內集中管理 -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>

 
    <script src="JS/firebase.js"></script>


    <!-- 主視覺專用 CSS 動畫 -->
    <!-- 這些樣式僅用於 <svg> 內部，避免與 Tailwind 類別衝突 -->
    <style>
      .main-visual-svg .book {
        /* 書本本體陰影 */
        filter: drop-shadow(0 10px 20px rgba(0, 100, 255, 0.1));
      }
      .main-visual-svg .node {
        fill: #4096ff;
        filter: drop-shadow(0 0 5px rgba(64, 150, 255, 0.8));
        animation: pulse 3s infinite alternate ease-in-out;
      }
      .main-visual-svg .connection {
        stroke: url(#networkGradient);
        stroke-width: 1.5;
        fill: none;
        filter: drop-shadow(0 0 3px rgba(64, 150, 255, 0.5));
        animation: glow 4s infinite alternate ease-in-out;
      }
      @keyframes pulse {
        0% {
          opacity: 0.7;
          transform: scale(0.95);
        }
        100% {
          opacity: 1;
          transform: scale(1.05);
        }
      }
      @keyframes glow {
        0% {
          opacity: 0.7;
          stroke-width: 1.2;
        }
        100% {
          opacity: 1;
          stroke-width: 2;
        }
      }
      .main-visual-svg .float {
        animation: float 8s infinite ease-in-out;
      }
      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-15px);
        }
      }
      .main-visual-svg .flow {
        animation: flow 15s infinite linear;
        stroke-dasharray: 10;
      }
      @keyframes flow {
        to {
          stroke-dashoffset: 200;
        }
      }
    </style>
  </head>

  <body>
    <!-- ✅ 放置導覽列的占位元素 -->
    <div id="navbar-placeholder"></div>

    <!-- 主視覺區塊：SVG 動畫及標題、按鈕 -->
    <section
      class="flex flex-col items-center justify-center text-center py-16 md:py-24 bg-white"
    >
      <div class="w-full max-w-5xl mx-auto">
        <svg
          class="main-visual-svg w-full h-auto"
          viewBox="0 0 800 600"
          xmlns="http://www.w3.org/2000/svg"
        >
          <!-- 定義漸層與濾鏡 -->
          <defs>
            <linearGradient
              id="bookGradient"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop offset="0%" stop-color="#ffffff" />
              <stop offset="100%" stop-color="#f0f4ff" />
            </linearGradient>
            <linearGradient
              id="pageGradient"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop offset="0%" stop-color="#ffffff" />
              <stop offset="100%" stop-color="#f8faff" />
            </linearGradient>
            <linearGradient
              id="networkGradient"
              x1="0%"
              y1="100%"
              x2="100%"
              y2="0%"
            >
              <stop offset="0%" stop-color="#4096ff" stop-opacity="0.8" />
              <stop offset="100%" stop-color="#1677ff" stop-opacity="0.6" />
            </linearGradient>
            <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="4" result="blur" />
              <feComposite in="SourceGraphic" in2="blur" operator="over" />
            </filter>
          </defs>
          <!-- 書本群組 -->
          <g class="book float">
            <!-- 書脊 -->
            <path
              d="M400 420 L400 220 L400 420 Z"
              fill="#ebe8ff"
              stroke="#c0d0ff"
              stroke-width="1"
            />
            <!-- 左頁 -->
            <path
              d="M400 420 L400 220 C400 220 300 200 220 220 L220 420 C300 400 400 420 400 420 Z"
              fill="url(#pageGradient)"
              stroke="#d0d8ff"
              stroke-width="1"
            />
            <!-- 右頁 -->
            <path
              d="M400 420 L400 220 C400 220 500 200 580 220 L580 420 C500 400 400 420 400 420 Z"
              fill="url(#pageGradient)"
              stroke="#d0d8ff"
              stroke-width="1"
            />
            <!-- 左頁細節線條 -->
            <path
              d="M240 240 L380 240"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 260 L380 260"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 280 L380 280"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 300 L380 300"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 320 L380 320"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 340 L380 340"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 360 L380 360"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M240 380 L380 380"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <!-- 右頁細節線條 -->
            <path
              d="M420 240 L560 240"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 260 L560 260"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 280 L560 280"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 300 L560 300"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 320 L560 320"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 340 L560 340"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 360 L560 360"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
            <path
              d="M420 380 L560 380"
              stroke="#e0e8ff"
              stroke-width="1"
              opacity="0.7"
            />
          </g>
          <!-- 網路連線群組 -->
          <g class="network">
            <!-- 中央發散點 -->
            <circle
              cx="400"
              cy="220"
              r="8"
              class="node"
              style="animation-delay: 0s"
            />
            <!-- 主要分支：左上 -->
            <path
              d="M400 220 C350 180 300 150 250 100"
              class="connection flow"
              style="animation-delay: 0.2s"
            />
            <circle
              cx="250"
              cy="100"
              r="6"
              class="node"
              style="animation-delay: 0.4s"
            />
            <!-- 主要分支：右上 -->
            <path
              d="M400 220 C450 180 500 150 550 100"
              class="connection flow"
              style="animation-delay: 0.3s"
            />
            <circle
              cx="550"
              cy="100"
              r="6"
              class="node"
              style="animation-delay: 0.5s"
            />
            <!-- 主要分支：正上 -->
            <path
              d="M400 220 C400 170 400 120 400 70"
              class="connection flow"
              style="animation-delay: 0.1s"
            />
            <circle
              cx="400"
              cy="70"
              r="7"
              class="node"
              style="animation-delay: 0.3s"
            />
            <!-- 次級分支：來自左上節點 -->
            <path
              d="M250 100 C220 70 190 50 150 40"
              class="connection flow"
              style="animation-delay: 0.6s"
            />
            <circle
              cx="150"
              cy="40"
              r="5"
              class="node"
              style="animation-delay: 0.8s"
            />
            <path
              d="M250 100 C230 80 210 60 200 30"
              class="connection flow"
              style="animation-delay: 0.7s"
            />
            <circle
              cx="200"
              cy="30"
              r="4"
              class="node"
              style="animation-delay: 0.9s"
            />
            <!-- 次級分支：來自正上節點 -->
            <path
              d="M400 70 C370 40 340 20 310 10"
              class="connection flow"
              style="animation-delay: 0.5s"
            />
            <circle
              cx="310"
              cy="10"
              r="5"
              class="node"
              style="animation-delay: 0.7s"
            />
            <path
              d="M400 70 C430 40 460 20 490 10"
              class="connection flow"
              style="animation-delay: 0.4s"
            />
            <circle
              cx="490"
              cy="10"
              r="5"
              class="node"
              style="animation-delay: 0.6s"
            />
            <!-- 次級分支：來自右上節點 -->
            <path
              d="M550 100 C580 70 610 50 650 40"
              class="connection flow"
              style="animation-delay: 0.8s"
            />
            <circle
              cx="650"
              cy="40"
              r="5"
              class="node"
              style="animation-delay: 1s"
            />
            <path
              d="M550 100 C570 80 590 60 600 30"
              class="connection flow"
              style="animation-delay: 0.95s"
            />
            <circle
              cx="600"
              cy="30"
              r="4"
              class="node"
              style="animation-delay: 1.1s"
            />
            <!-- 三級分支 -->
            <path
              d="M150 40 C130 30 110 25 90 20"
              class="connection flow"
              style="animation-delay: 1s"
            />
            <circle
              cx="90"
              cy="20"
              r="3"
              class="node"
              style="animation-delay: 1.2s"
            />
            <path
              d="M310 10 C290 5 270 5 250 10"
              class="connection flow"
              style="animation-delay: 0.9s"
            />
            <circle
              cx="250"
              cy="10"
              r="3"
              class="node"
              style="animation-delay: 1.1s"
            />
            <path
              d="M490 10 C510 5 530 5 550 10"
              class="connection flow"
              style="animation-delay: 0.8s"
            />
            <circle
              cx="550"
              cy="10"
              r="3"
              class="node"
              style="animation-delay: 1s"
            />
            <path
              d="M650 40 C670 30 690 25 710 20"
              class="connection flow"
              style="animation-delay: 1.2s"
            />
            <circle
              cx="710"
              cy="20"
              r="3"
              class="node"
              style="animation-delay: 1.4s"
            />
            <!-- 額外小節點 -->
            <circle
              cx="350"
              cy="150"
              r="3"
              class="node"
              style="animation-delay: 0.3s"
            />
            <circle
              cx="450"
              cy="150"
              r="3"
              class="node"
              style="animation-delay: 0.4s"
            />
            <circle
              cx="300"
              cy="60"
              r="2"
              class="node"
              style="animation-delay: 0.7s"
            />
            <circle
              cx="500"
              cy="60"
              r="2"
              class="node"
              style="animation-delay: 0.8s"
            />
            <circle
              cx="180"
              cy="70"
              r="2"
              class="node"
              style="animation-delay: 0.9s"
            />
            <circle
              cx="620"
              cy="70"
              r="2"
              class="node"
              style="animation-delay: 1s"
            />
            <!-- 節點之間的連線 -->
            <path
              d="M250 100 C275 90 325 80 350 150"
              class="connection flow"
              style="animation-delay: 0.5s"
            />
            <path
              d="M400 70 C385 95 370 120 350 150"
              class="connection flow"
              style="animation-delay: 0.65s"
            />
            <path
              d="M400 70 C415 95 430 120 450 150"
              class="connection flow"
              style="animation-delay: 0.7s"
            />
            <path
              d="M550 100 C525 90 475 80 450 150"
              class="connection flow"
              style="animation-delay: 0.85s"
            />
            <!-- 背景小節點 -->
            <circle
              cx="220"
              cy="180"
              r="1.5"
              class="node"
              style="animation-delay: 1.15s"
            />
            <circle
              cx="580"
              cy="180"
              r="1.5"
              class="node"
              style="animation-delay: 1.2s"
            />
            <circle
              cx="330"
              cy="120"
              r="1.5"
              class="node"
              style="animation-delay: 1.3s"
            />
            <circle
              cx="470"
              cy="120"
              r="1.5"
              class="node"
              style="animation-delay: 1.4s"
            />
            <circle
              cx="370"
              cy="90"
              r="1.5"
              class="node"
              style="animation-delay: 1.5s"
            />
            <circle
              cx="430"
              cy="90"
              r="1.5"
              class="node"
              style="animation-delay: 1.6s"
            />
          </g>
        </svg>
      </div>
      <!-- 主視覺標題 -->
      <h2 class="mt-8 text-2xl md:text-3xl font-bold text-gray-800">
        共學未來・去中心化學習網絡
      </h2>
      <!-- 主視覺按鈕：加入參與 -->
      <button
        id="joinButton"
        class="mt-6 inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-md shadow-md transition"
      >
        我要參與
      </button>
    </section>

    <!-- 理念與初衷區塊 -->
    <section class="bg-gray-50 py-14 md:py-16 px-6 md:px-10">
      <div class="max-w-4xl mx-auto text-center md:text-left">
        <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 mb-4">
          為什麼創造阿卡西圖書館？
        </h2>
        <p class="text-base md:text-lg leading-relaxed text-gray-700">
          在這個資訊氾濫與知識被壟斷的時代，<br />
          我們相信：<strong>真正的智慧應屬於每個人。</strong><br /><br />
          阿卡西圖書館誕生，是為了實現這個願景：<br />
          📚 每一位學習者，都能成為貢獻者<br />
          🔐 每一份紀錄，都能公開透明且不可竄改<br />
          🌱 每一次參與，都是一場價值的種植
        </p>
      </div>
    </section>

    <!-- 使命與願景區塊 -->
    <section class="bg-white py-14 md:py-16 px-6 md:px-10">
      <div class="max-w-4xl mx-auto text-center md:text-left">
        <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 mb-4">
          使命｜願景｜策略
        </h2>
        <p class="text-base md:text-lg leading-relaxed text-gray-700">
          🎯 使命｜讓每一份知識、每一份努力都有回報<br />
          🛠 願景｜建立一個以「真實貢獻」為核心的學習宇宙<br />
          🌐 策略｜去中心化儲存、NFT 憑證、貢獻即獎勵、共審共治
        </p>
      </div>
    </section>

    <!-- 加入方式區塊 -->
    <section class="bg-gray-50 py-14 md:py-16 px-6 md:px-10">
      <div class="max-w-4xl mx-auto text-center md:text-left">
        <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 mb-4">
          我該如何開始？
        </h2>
        <p class="text-base md:text-lg leading-relaxed text-gray-700">
          ✅ 我會使用錢包：直接連接、簽名參與、進入白名單<br />
          🆕 我還不會用錢包：留下聯絡方式，我們一對一協助教學<br /><br />
          每個人都能參與，只要你有意願貢獻智慧！
        </p>
        <button
          id="startButton"
          class="mt-6 inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-md shadow-md transition"
        >
          立即參與
        </button>
      </div>
    </section>

    <!-- 結語區塊 -->
    <section class="bg-white py-14 md:py-16 px-6 md:px-10">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 mb-4">
          你不需要完美，只需要真誠參與
        </h2>
        <p class="text-base md:text-lg leading-relaxed text-gray-700">
          每個人都能為人類智慧留下足跡。
        </p>
      </div>
    </section>

    <script src="JS/navbar-loader.js"></script>
    <script src="JS/init-page.js"></script>


  <!-- 你原本的前端程式：保持在後面，確保拿得到 window.SiweMessage -->
 <script src="JS/siwe.js?v=20250911b" defer></script>

 <script src="JS/wallet.js" defer></script>
<script src="JS/points.js" defer></script>
<script src="JS/main.js" defer></script>
<script src="JS/ui.js" defer></script>


    <!-- ✅ 首頁覆寫：連接成功後導向個人頁；CTA 觸發連接 -->
    <script>
      (function () {
        // 防重入
        if (window.__AKC_HOME_REDIRECT_INSTALLED__) return;
        window.__AKC_HOME_REDIRECT_INSTALLED__ = true;

        // 旗標：只有首頁 CTA 觸發時才允許導頁
        window.AKC = window.AKC || {};

        function goProfile(addr) {
          if (!addr) return;
          if (location.pathname.endsWith('profile.html')) return;
          location.href = `profile.html?uid=${addr}`;
        }

        // 首頁：只要收到登入事件（簽名成功）就導個人頁；回到首頁不會再強跳
        function onConnected(payload) {
          const addr =
            payload?.address || sessionStorage.getItem('walletAddress');
          goProfile(addr);
        }

        // 1) 監聽事件匯流（優先）
        if (window.AKC?.bus?.on) {
          window.AKC.bus.on('wallet:connected', onConnected);
        } else {
          // 2) 後備：CustomEvent
          document.addEventListener('AKC:wallet:connected', (e) =>
            onConnected(e?.detail)
          );
        }

        // 3) CTA 綁定：點擊即嘗試連接；已登入則立即導頁
        function bindCTA(id) {
          const el = document.getElementById(id);
          if (!el) return;
          el.addEventListener('click', async () => {
            try {
              // 若已登入，直接導頁
              const addrNow = sessionStorage.getItem('walletAddress');
              if (addrNow) {
                // 已登入：允許導頁（本次 CTA）
                goProfile(addrNow);

                return;
              }

              // 未登入：發起 connect（stay:true 不會全域導頁）
              await window.AKC?.wallet?.connect?.({ stay: true });
              // 成功後會由 onConnected 觸發導頁；取消/失敗時不導
            } catch (err) {
              console.warn('[home] connect canceled or failed', err);
            }
          });
        }
        bindCTA('joinButton');
        bindCTA('startButton');
      })();
    </script>

 <!-- 暫停使用 ESM 版本，避免與 compat 重覆；未來全站改 ESM 再開 -->
 <!-- <script type="module" src="/JS/auth-social.mjs"></script> -->

  </body>
</html>
